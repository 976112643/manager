<extend name="Public/body" />
<block name="body">
<style type="text/css">
table{

}
table td{
    padding:10px 25px;
    color: #999;
}
.fs-month-select {
    width:200px;
    position:absolute;
    z-index:999;
    height:190px;
    background:#fff;
    border:1px solid #dadada;
    -webkit-box-sizing:border-box;
    -moz-box-sizing:border-box;
    -ms-box-sizing:border-box;
    -o-box-sizing:border-box;
    box-sizing:border-box;
    font-size:13px;
    color:#919191;
    -webkit-box-shadow:1px 1px 2px #ccc;
    -moz-box-shadow:1px 1px 2px #ccc;
    -ms-box-shadow:1px 1px 2px #ccc;
    -o-box-shadow:1px 1px 2px #ccc;
    box-shadow:1px 1px 2px #ccc;
    display:none
}
.fs-month-select li {
    cursor:pointer;
    -webkit-transition:background-color .5s,color .5s;
    -moz-transition:background-color .5s,color .5s;
    -ms-transition:background-color .5s,color .5s;
    -o-transition:background-color .5s,color .5s;
    transition:background-color .5s,color .5s
}
.fs-month-select .year {
    float:left;
    width:88px;
    height:100%;
    overflow-y:auto
}
.fs-month-select .year li {
    height:30px;
    line-height:30px;
    padding-left:15px
}
.fs-month-select .year .cur,.fs-month-select .year li:hover {
    background:#ececec;
    color:#333
}
.fs-month-select .month {
    position:absolute;
    right:0;
    width:130px;
    height:100%;
    overflow-y:auto;
    background:#f5f5f5
}
.fs-month-select .month li {
    height:30px;
    line-height:30px;
    text-align:center
    display:inline-block;
}
.fs-month-select .month .cur,.fs-month-select .month li:hover {
    background:#c9c9c9;
    color:#fff
}
.ui-month-select {
    width:234px;
    height:230px;
    border:1px solid #d5d5d5;
    -webkit-box-shadow:0 0 10px 0 rgba(0,0,0,.15);
    box-shadow:0 0 10px 0 rgba(0,0,0,.15);
    border-radius:4px
}
.ui-month-select .year {
    width:80px;
    padding:0 5px
}
.ui-month-select .year ul{
    padding:0px;
}
.ui-month-select .year li {
    width:100%;
    text-align:center;
    padding-left:0;
    margin:3px 0;
    list-style:none;
    -webkit-transition:initial;
    transition:initial
}
.ui-month-select .month .cur,.ui-month-select .month li:hover,.ui-month-select .year .cur,.ui-month-select .year li:hover {
    border-radius:4px;
    background-color:#659DED;
    color:#fff
}
.ui-month-select .month {
    padding:0 5px
}
.ui-month-select .month ul{
    padding:0px;
    margin:0px;
}
.ui-month-select .month li {
    width:40px;
    margin:3px;
    padding:0px;
    display:inline-block;
    list-style:none;
    -webkit-transition:initial;
    transition:initial;
    text-align:center;
}
    </style>    
<section class="content">
	<!-- 基本信息 S -->
	<div class="row">
        <div class="col-md-12">
            <div class="box">
            <h3>&nbsp;&nbsp;当日数据</h3>
                <div style="border-bottom:1px solid #f2f2f2;padding-bottom:30px;">
                <table>
                    <tbody><tr>
                        <td rowspan="2" style="font-size:16px;color:#000;">统计简报</td>
                        <td>新增用户</td>
                        <td>用户活跃量</td>
                        <!--<td>充值总额</td>-->
                        <td>收入总额</td>
                        <td>支出总额</td>
                        <td>净额</td>
                    </tr>
                    <tr>
                        <td>
                            <span style="font-size:20px;color:#000;" id="register_count"><?=$member_count+$gmeber_count?></span>
                            <span style="font-size:14px;">个</span>
                        </td>
                        <td>
                            <span style="font-size:20px;color:#000;" id="login_count"><?=$member_call_api_count?></span>
                            <span style="font-size:14px;">个</span>
                        </td>
                        <!--<td>
                            <span style="font-size:20px;color:#000;" id="rechage_count">--</span>
                            <span style="font-size:14px;">元</span>
                        </td>-->
                        <td>
                            <span style="font-size:20px;color:#000;" id="pay_count"><?=$pingtai_total?$pingtai_total:0.00?></span>
                            <span style="font-size:14px;">元</span>
                        </td>
                        <td>
                            <span style="font-size:20px;color:#000;" id="pay_count"><?=$pingtai_remove_total?$pingtai_remove_total:0.00?></span>
                            <span style="font-size:14px;">元</span>
                        </td>
                        <td>
                            <span style="font-size:20px;color:#000;" id="pay_count"><?=$pingtai_total - $pingtai_remove_total?></span>
                            <span style="font-size:14px;">元</span>
                        </td>
                    </tr>
                </tbody></table>
                </div>
             </div>
        </div>
	</div>
	<!-- 基本信息 E -->

	<!-- 月度报表 S -->
	<div class="row">
		<div class="col-md-12">
			<div class="box">
				<!-- 报表 S -->
				<div class="box-body">
					<div class="row">
						<!-- 报表曲线图 S -->
						<div class="col-md-12">
							<div class="chart">
								<!-- 报表图  -->
								<div id="echarts" style="height: 300px;"></div>
							</div>
						</div>
						<!-- 报表曲线图 S -->
					</div>
					<!-- /.row -->
				</div>
				<!-- 报表 E -->
			</div>
		</div>
	</div>
	<!-- 月度报表 E -->
	
   <!-- 月度报表 S -->
    <div class="row">
        <div class="col-md-12">
            <div class="box">
                <!-- 报表 S -->
                <div class="box-body">
                    <div class="row">
                        <!-- 报表曲线图 S -->
                        <div class="col-md-12">
                            <div class="chart">
                                <!-- 报表图  -->
                                <div id="echarts_4" style="height: 300px;"></div>
                            </div>
                        </div>
                        <!-- 报表曲线图 S -->
                    </div>
                    <!-- /.row -->
                </div>
                <!-- 报表 E -->
            </div>
        </div>
    </div>
    <!-- 月度报表 E -->
	
	<div class="row">
		<div class="col-md-6">
			<!-- 最新订单 S -->
			<div class="box box-info">
				<div class="box-header with-border">
					<h3 class="box-title">最新订单</h3>
                    <a  href="<?=U('Backend/Shop/Order/index')?>" class="btn btn-sm btn-success btn-flat pull-right">查看所有</a>
				</div>
				<div class="box-body">
					<div class="table-responsive">
						<table class="table no-margin">
							<thead>
								<tr>
									<th>订单号</th>
									<th>名称</th>
									<th>状态</th>
									<th>时间</th>
								</tr>
							</thead>
							<tbody>
							    <?php foreach($order_detail as $row){
							    ?>
							    
								<tr>
									<td><a href="<?=U('Backend/Shop/Order/details',array('ids'=>$row['id']))?>"><?=$row['order_no']?></a></td>
									<td><?=$row['user_name']?$row['user_name']:$row['nickname']?></td>
									<td><span class="label <?=$order_status[$row['status']]['class']?>"><?=$order_status[$row['status']]['title']?></span></td>
									<td>
										<div class="sparkbar" data-color="#00a65a" data-height="20"><?=$row['add_time']?></div>
									</td>
								</tr>
								<?php }?>
							</tbody>
						</table>
					</div>
				</div>
				<div class="box-footer clearfix">
					<!--<a href="javascript:void(0)"
						class="btn btn-sm btn-info btn-flat pull-left">产品选购</a>
				    <a
						href="javascript:void(0)"
						class="btn btn-sm btn-default btn-flat pull-right">查看所有</a>-->
				</div>
			</div>
			<!-- 最新订单 E -->
		</div>
		<div class="col-md-6">
			<!-- 最新订单 S -->
			<div class="box box-info">
				<div class="box-header with-border">
					<h3 class="box-title">最新注册用户</h3>
                    <a  href="<?=U('Backend/Member/Member/index')?>" class="btn btn-sm btn-success btn-flat pull-right">查看所有</a>
				</div>
				<div class="box-body">
					<div class="table-responsive">
						<table class="table no-margin">
							<thead>
								<tr>
									<th>名字</th>
									<th>手机号</th>
									<th>状态</th>
									<th>注册日期</th>
								</tr>
							</thead>
							<tbody>
							    <?php foreach($member_detail as $row){ ?>
								<tr>
									<td><a href="<?=U('Backend/Member/Member/details',array('ids'=>$row['id']))?>"><?=$row['nickname']?></a></td>
									<td><?=$row['mobile']?></td>
									<?php if($row['is_hid']==0){ ?>
									<td><span class="label label-success">正常</span></td>
									<?php }else{ ?>
									<td><span class="label label-success">禁用</span></td>
									<?php }?>
									<td>
										<div class="sparkbar" data-color="#00a65a" data-height="20"><?=date('Y-m-d H:i:s',$row['register_time'])?></div>
									</td>
								</tr>
								<?php }?>
							</tbody>
						</table>
					</div>
				</div>
				<div class="box-footer clearfix">
					<!--<a href="javascript:void(0)"
						class="btn btn-sm btn-info btn-flat pull-left">产品选购</a>
					<a
						href="javascript:void(0)"
						class="btn btn-sm btn-default btn-flat pull-right">查看所有</a>-->
				</div>
			</div>
			<!-- 最新订单 E -->
		</div>
	</div>
</section>
<js href="__PLUGIN__/echarts/echarts.js" />
 <script
	type="text/javascript">
	var myChart1 = echarts.init(document.getElementById('echarts'),'macarons');
    console.log(myChart1);
    var option1 = {
        legend: {
            data: ['已支付金额','未支付金额'],
            x: "center"
        },
        tooltip : {
            trigger: 'axis'
        },
        toolbox: {
            show:true,
            feature: {
                dataZoom: {
                    show: true,
                    yAxisIndex: 'none'
                },
                dataView: {
                    readOnly: true,
                    show: true
                },
                magicType: {
                    type: ["line", "bar"],
                    show: true
                },
                restore: {show: true},
                saveAsImage: {show: true},
            }
        },
        calculable: true,
        xAxis: [
            {
                type: "category",
                data: <?=$date_list?>,
                boundaryGap: false,
                splitLine: {
                    show: false
                }
            }
        ],
        yAxis: [
            {
                type: "value",
                splitLine: {
                    show: false
                }
            }
        ],
        series: [
            {
                name: "已支付金额",
                type: "line",
                itemStyle: {
                    normal: {
                        areaStyle: {
                            type: "default"
                        }
                    }
                },
                data: <?=$user_list['member']?>,
                smooth: true
            },
            {
                name: "未支付金额",
                type: "line",
                itemStyle: {
                    normal: {
                        areaStyle: {
                            type: "default"
                        }
                    }
                },
                data: <?=$user_list['new_order']?>,
                smooth: true
            }
           
        ],
        title: {
            text: "月度订单报表（订单总金额：<?=$user_list['user_count']?>元）",
        },
        grid: {
            x: 50,
            x2: 30,
            y2: 30,
            y: 60,
            borderWidth: 0
        }
    };
    myChart1.setOption(option1);
    
    var myChart4 = echarts.init(document.getElementById('echarts_4'),'macarons');
    var option = {
        tooltip : {
            trigger: 'axis'
        },
        toolbox: {
            show:true,
            feature: {
                dataZoom: {
                    show: true,
                    yAxisIndex: 'none'
                },
                dataView: {
                    readOnly: true,
                    show: true
                },
                magicType: {
                    type: ["line", "bar"],
                    show: true
                },
                restore: {show: true},
                saveAsImage: {show: true},
            }
        },
        calculable: true,
        xAxis: [
            {
                type: "category",
                data: <?=$date_list?>,
                boundaryGap: false,
                splitLine: {
                    show: false
                }
            }
        ],
        yAxis: [
            {
                type: "value",
                splitLine: {
                    show: false
                }
            }
        ],
        series: [
            {
                name: "注册用户",
                type: "line",
                itemStyle: {
                    normal: {
                        areaStyle: {
                            type: "default"
                        }
                    }
                },
                data: <?=$m_user_list['m_member']?>,
                smooth: true
            },
           
        ],
        title: {
            text: "月度注册人员报表（注册总人数：<?=$m_user_list['m_user_count']?>人）",
        },
        grid: {
            x: 50,
            x2: 30,
            y2: 30,
            y: 60,
            borderWidth: 0
        }
    };
    myChart4.setOption(option);
    
    
	</script> 
	
    <script type="text/javascript">
        
    </script>
	
	
	</block>